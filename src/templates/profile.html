{% extends 'base.html' %} {% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card border-0 shadow-lg mb-4 text-center p-4">
      <div class="d-flex justify-content-center">
        <img
          src="{{ user[7] }}"
          alt="Profil"
          class="rounded-circle shadow-lg mb-3"
          width="150"
          height="150"
          style="object-fit: cover; border: 5px solid white"
        />
      </div>

      <h2 class="fw-bold mb-1">{{ user[1] }}</h2>
      <div class="mb-2">
        <span class="badge bg-warning text-dark border border-dark shadow-sm">
          <i class="fas fa-medal"></i> {{ user_level }}
        </span>
      </div>
      <p class="text-muted mb-2">
        {% if user[6] %} {{ user[6] }} {% else %} Merhaba, ben Walk Together
        kullanÄ±cÄ±sÄ±yÄ±m! ğŸŒ² {% endif %}
      </p>

      {% if user[5] %}
      <span
        class="badge bg-light text-dark border mx-auto mb-3"
        style="width: fit-content"
      >
        {{ user[5] }} YaÅŸÄ±nda
      </span>
      {% endif %} {% if session.get('user_id') == user[0] %}
      <div>
        <a href="/edit_profile" class="btn btn-outline-dark rounded-pill px-4">
          <i class="fas fa-cog me-1"></i> Profili DÃ¼zenle
        </a>
      </div>
      {% endif %}
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="card border-0 shadow-sm mb-4 h-100">
          <div class="card-header bg-white fw-bold">
            <i class="fas fa-heart text-danger"></i> Ä°lgi AlanlarÄ±
          </div>
          <div class="card-body">
            <div class="d-flex flex-wrap gap-2">
              {% for hobby in hobbies %}
              <span
                class="badge bg-success bg-opacity-10 text-success border border-success px-3 py-2 rounded-pill"
              >
                {{ hobby[0] }}
              </span>
              {% else %}
              <span class="text-muted small">HenÃ¼z hobi eklenmemiÅŸ.</span>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="card border-0 shadow-sm mb-4 h-100">
          <div class="card-header bg-white fw-bold">
            <i class="fas fa-medal text-warning"></i> Rozetler
          </div>
          <div class="card-body">
            {% for badge in badges %}
            <div class="d-flex align-items-center mb-2">
              <div class="bg-warning bg-opacity-25 rounded-circle p-2 me-2">
                <i class="{{ badge[1] }} text-warning"></i>
              </div>
              <div>
                <strong>{{ badge[0] }}</strong>
                <p class="mb-0 small text-muted">{{ badge[2] }}</p>
              </div>
            </div>
            {% else %}
            <small class="text-muted">HenÃ¼z rozet kazanÄ±lmadÄ±.</small>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>

    <div class="card shadow-sm border-0 mt-4">
      <div class="card-header bg-white py-3">
        <h5 class="mb-0 fw-bold">
          <i class="fas fa-map-marked-alt text-danger"></i> OluÅŸturulan Rotalar
        </h5>
      </div>
      <div class="card-body p-0">
        {% if created_routes %}
        <ul class="list-group list-group-flush">
          {% for route in created_routes %}
          <li
            class="list-group-item d-flex justify-content-between align-items-center p-3"
          >
            <div class="d-flex align-items-center">
              <div class="me-3 text-center">
                {% if route[3] == 'Easy' %}
                <i class="fas fa-hiking fa-2x text-success"></i>
                {% elif route[3] == 'Medium' %}
                <i class="fas fa-hiking fa-2x text-warning"></i>
                {% else %}
                <i class="fas fa-hiking fa-2x text-danger"></i>
                {% endif %}
              </div>
              <div>
                <a
                  href="/route_detail/{{ route[0] }}"
                  class="text-dark fw-bold text-decoration-none d-block"
                >
                  {{ route[1] }}
                </a>
                <small class="text-muted">
                  {{ route[2] }} km â€¢ {{ route[3] }}
                </small>
              </div>
            </div>

            <div>
              <a
                href="/route_detail/{{ route[0] }}"
                class="btn btn-outline-primary btn-sm"
                title="Ä°ncele"
              >
                <i class="fas fa-eye"></i>
              </a>

              {% if session.get('user_id') == user[0] %}
              <a
                href="/delete_route/{{ route[0] }}"
                class="btn btn-outline-danger btn-sm ms-1"
                onclick="return confirm('Bu rotayÄ± silmek istediÄŸine emin misin? BaÄŸlÄ± etkinlikler de silinebilir!');"
                title="Sil"
              >
                <i class="fas fa-trash-alt"></i>
              </a>
              {% endif %}
            </div>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <div class="text-center py-4 text-muted">
          <i class="fas fa-route fa-2x mb-2 opacity-50"></i>
          <p>HenÃ¼z oluÅŸturulan bir rota yok.</p>
        </div>
        {% endif %}
      </div>
    </div>

    <div class="card shadow-sm border-0 mt-4">
      <div class="card-header bg-white py-3 border-bottom-0">
        <h5 class="mb-0 fw-bold">
          <i class="fas fa-calendar-check text-primary me-2"></i>Etkinliklerim
        </h5>
      </div>
      <div class="card-body pt-0">
        <ul class="nav nav-tabs mb-3" id="eventTabs" role="tablist">
          <li class="nav-item">
            <button
              class="nav-link active fw-bold"
              data-bs-toggle="tab"
              data-bs-target="#upcoming"
              type="button"
            >
              ğŸ“… YaklaÅŸanlar
            </button>
          </li>
          <li class="nav-item">
            <button
              class="nav-link fw-bold"
              data-bs-toggle="tab"
              data-bs-target="#past"
              type="button"
            >
              âœ… Tamamlananlar
            </button>
          </li>
          <li class="nav-item">
            <button
              class="nav-link fw-bold text-dark"
              data-bs-toggle="tab"
              data-bs-target="#organized"
              type="button"
            >
              ğŸ“¢ YÃ¶nettiklerim
            </button>
          </li>
        </ul>

        <div class="tab-content" id="eventTabsContent">
          <div class="tab-pane fade show active" id="upcoming">
            {% if upcoming_events %}
            <div class="list-group list-group-flush">
              {% for event in upcoming_events %}
              <a
                href="/event/{{ event[0] }}"
                class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
              >
                <div>
                  <h6 class="mb-0 fw-bold text-dark">{{ event[4] }}</h6>
                  <small class="text-muted">
                    <i class="fas fa-route"></i> {{ event[1] }} â€¢
                    <i class="far fa-clock"></i> {{ event[2].strftime('%d.%m
                    %H:%M') }}
                  </small>
                </div>
                <span class="badge bg-primary rounded-pill">Aktif</span>
              </a>
              {% endfor %}
            </div>
            {% else %}
            <p class="text-muted small p-2">YaklaÅŸan etkinlik bulunmuyor.</p>
            {% endif %}
          </div>

          <div class="tab-pane fade" id="past">
            {% if past_events %}
            <div class="list-group list-group-flush">
              {% for event in past_events %}
              <div
                class="list-group-item d-flex justify-content-between align-items-center bg-light"
              >
                <div>
                  <h6 class="mb-0 text-decoration-line-through text-muted">
                    {{ event[4] }}
                  </h6>
                  <small class="text-success fw-bold">
                    <i class="fas fa-check-circle"></i> TamamlandÄ±
                  </small>
                </div>
                <span class="badge bg-success rounded-pill">
                  +{{ (event[3] * 10)|int }} Puan
                </span>
              </div>
              {% endfor %}
            </div>
            {% else %}
            <p class="text-muted small p-2">HenÃ¼z tamamlanmÄ±ÅŸ etkinlik yok.</p>
            {% endif %}
          </div>

          <div class="tab-pane fade" id="organized">
            {% if organized_events %}
            <div class="list-group list-group-flush">
              {% for event in organized_events %}
              <a
                href="/event/{{ event[0] }}"
                class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
              >
                <div>
                  <h6 class="mb-0 fw-bold text-dark">{{ event[5] }}</h6>
                  <small class="text-muted">
                    <i class="fas fa-users"></i> {{ event[4] }} KatÄ±lÄ±mcÄ± |
                    Durum: {{ event[3] }}
                  </small>
                </div>
                <i class="fas fa-chevron-right text-muted"></i>
              </a>
              {% endfor %}
            </div>
            {% else %}
            <p class="text-muted small p-2">
              HenÃ¼z bir etkinlik oluÅŸturmadÄ±nÄ±z.
            </p>
            <div class="text-center pb-2">
              <a href="/create" class="btn btn-sm btn-outline-primary"
                >Ä°lk EtkinliÄŸini OluÅŸtur</a
              >
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
