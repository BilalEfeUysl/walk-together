{% extends 'base.html' %} {% block content %}

<div
  class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10 min-h-screen font-display"
>
  <div
    class="flex flex-col sm:flex-row sm:items-end justify-between gap-4 mb-8"
  >
    <div class="flex flex-col gap-1">
      <h1
        class="text-3xl font-black text-slate-900 dark:text-white tracking-tight"
      >
        Bildirimler
      </h1>
      <p class="text-slate-500 dark:text-slate-400 font-medium">
        Topluluktan ve aktivitelerden son haberler.
      </p>
    </div>

    {% if notifications %}
    <div class="flex items-center gap-2">
      <a
        href="{{ url_for('main.delete_all_notifications') }}"
        onclick="return confirm('Tüm bildirimleri silmek istediğine emin misin?')"
        class="text-slate-500 hover:text-red-600 text-sm font-bold px-4 py-2.5 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors"
      >
        Temizle
      </a>

      <a
        href="{{ url_for('main.mark_all_read') }}"
        class="flex items-center gap-2 bg-white dark:bg-[#1e2621] border border-slate-200 dark:border-[#2a362f] shadow-sm px-5 py-2.5 rounded-xl text-sm font-bold text-primary hover:bg-primary hover:text-white hover:border-primary transition-all group"
      >
        <span class="material-symbols-outlined text-[20px]">done_all</span>
        <span>Tümünü Okundu Yap</span>
      </a>
    </div>
    {% endif %}
  </div>

  <div class="flex flex-col gap-3">
    {% if notifications %} {% for n in notifications %}
    <a
      href="{{ n[4] if n[4] else '#' }}"
      class="group relative flex flex-col sm:flex-row items-start sm:items-center gap-4 p-5 rounded-2xl border transition-all duration-200 
           {{ 'bg-green-50/80 dark:bg-green-900/10 border-green-100 dark:border-green-900/30 hover:border-primary/30' if not n[2] else 'bg-white dark:bg-[#1e2621] border-slate-100 dark:border-[#2a362f] hover:border-slate-300 dark:hover:border-slate-600 shadow-sm' }}"
    >
      {% if not n[2] %}
      <div
        class="absolute left-0 top-4 bottom-4 w-1 bg-primary rounded-r-full"
      ></div>
      {% endif %}

      <div
        class="shrink-0 size-12 rounded-2xl flex items-center justify-center shadow-sm 
               {{ 'bg-white dark:bg-[#1e2621] text-primary' if not n[2] else 'bg-slate-50 dark:bg-slate-800 text-slate-400' }}"
      >
        <span
          class="material-symbols-outlined {{ 'animate-pulse' if not n[2] }}"
          >notifications</span
        >
      </div>

      <div class="flex-1 min-w-0 pr-8">
        <div class="flex flex-col gap-1">
          <p
            class="text-slate-900 dark:text-white text-base leading-snug {{ 'font-bold' if not n[2] else 'font-medium text-slate-600 dark:text-slate-300' }}"
          >
            {{ n[0] }} {% if not n[2] %}
            <span
              class="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-black bg-green-200 text-green-800 ml-2 uppercase tracking-wide"
              >Yeni</span
            >
            {% endif %}
          </p>
          <p
            class="text-slate-400 dark:text-slate-500 text-xs font-bold flex items-center gap-1"
          >
            <span class="material-symbols-outlined text-[14px]">schedule</span>
            {{ n[1].strftime('%d.%m.%Y %H:%M') }}
          </p>
        </div>
      </div>

      <object class="absolute top-4 right-4 sm:static sm:mr-0 z-10">
        <a
          href="{{ url_for('main.delete_notification', notif_id=n[3]) }}"
          class="flex items-center justify-center size-8 rounded-full text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all"
          title="Sil"
        >
          <span class="material-symbols-outlined text-[20px]">close</span>
        </a>
      </object>

      {% if not n[2] %}
      <div
        class="absolute right-4 top-1/2 -translate-y-1/2 size-2 bg-primary rounded-full sm:hidden"
      ></div>
      {% endif %}
    </a>
    {% endfor %} {% else %}
    <div class="flex flex-col items-center justify-center py-24 text-center">
      <div
        class="bg-slate-50 dark:bg-[#1e2621] p-6 rounded-full mb-4 border border-slate-100 dark:border-[#2a362f]"
      >
        <span class="material-symbols-outlined text-5xl text-slate-300"
          >check_circle</span
        >
      </div>
      <h3 class="text-lg font-bold text-slate-900 dark:text-white">
        Her şey güncel!
      </h3>
      <p class="text-slate-500 max-w-xs mx-auto mt-1">
        Şu an için yeni bir bildirimin yok. Maceraya devam et!
      </p>
      <a
        href="{{ url_for('main.index') }}"
        class="mt-6 px-6 py-3 bg-primary hover:bg-primary-dark text-white rounded-xl font-bold transition-all shadow-lg shadow-primary/20 active:scale-95"
      >
        Keşfetmeye Dön
      </a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
